# 从比特币分裂的内幕来看 Decred 正确的硬分叉方式

![dcrFork](img/fork/dcr_fork.png)

2015年下半年，一群比特币开发者们提出了困扰比特币治理难题的解决方案。btcsuite是一种写在Go程序上的比特币全节点客户端，该应用的创始人率先遇到了治理问题，并写了一系列博客来强调比特币社区治理问题的严重性。对他们而言，应对途径很明确，要回归到最基本的问题，根据去中心化治理来开创一个全新的币种。之后不久，一个名叫C0（ Company Zero）的组织就宣布了Decred的问世。Decred不仅有效解决了比特币面临的治理难题，同时对其技术进行了升级。除了资金问题，比特币面临的主要治理难题就是无法有效达成共识。具体来讲，就是比特币硬分叉和更改共识规则的最终决定权在谁手上。为了更好的理解Decred是如何解决这一问题的，这篇文章会分别阐述比特币和Decred是如何达成硬分叉决定的。

### 谁来决定以及怎样改变比特币的共识规则？

身处加密货币大家庭，我有这样一种体会：社区对谁最终拍板比特币硬分叉事宜，以及制定新的共识规则存在一种误区。社区似乎并没有意识到谁才是比特币网络的实际统治者。由于没有正式的治理体系，大家对比特币背后的掌权者并不了解。也就是说，由于缺乏一种有效的投票机制，想要顺利让比特币的旧共识机制过渡到新的共识机制必然会耗费很长时间，并且造成混乱的局面。

### 误解：

局外人以为整个比特币社区的参与者：开发者、用户、矿工、钱包和交易所都对决策有发言权，我可以理解他们为什么会有这种想法。这是因为过去几年，社区举办了多场比特币圆桌会议，推特投票，矿工表决，钱包和交易所的声明，在线直播辩论，正式的协议，Coinbase的投票，BitcoinCore团队近期的建议声明。而现实是所有参与者中只有一方有权表决硬分叉并制定新的共识规则。

### 现实： 

尽管让人难以相信，但比特币社区采取的工作量证明机制最终让矿工决定进行硬分叉。中本聪发明比特币的初衷是建立一个开源社区，一个点对点网络体系，任何人都可以参与其中。然而，POW机制却让矿工掌握比特币的实权，这与他发明比特币的初衷是相违背的。这在比特币白皮书中有理可依：

**“POW机制还可以解决达成意见的代表问题。如果大部分人都信奉一个IP地址代表一票，那么任何人都可以创造更多IP地址来破坏这一原则。POW的本质就是1CPU=1投票权。最长的链代表社区共识，因为这条链代表了最多的工作量。”**

所以，简言之，比特币硬分叉的决策达成过程可以总结为：1CPU代表1投票权。这意味着谁拥有更多的CPU，谁贡献更多的算力，谁就有更多的表决权来决定最长链，代表大部分人的意见

我们已经见识到了POW矿工是如何做决策的，现在我们来看几个事实:
* POW矿工在比特币社区中掌握最终决策权。
* POW矿工现在代表大的挖矿公司。
* POW挖矿公司现在越来越中心化——4大矿池就掌握着全网50%以上的算力。
* POW挖矿企业目的是为了赚钱。

因此，日益中心化的矿业做决定来最大化他们的利益。这就导致存在这样一种矛盾：他们的利益不能代表用户的利益，反而抢夺了用户的利益。比如，POW矿工不会降低手续费来支持用户完成转账。用户进行交易的单笔平均手续费为3美金，而矿工则希望费用越高越好。

简言之，POW矿工集中算力来支持某一条链进行硬分叉。

### POW矿工进行决策，会导致哪些问题？

中本聪退出比特币社区后，将比特币的开发和维护使命交给了Gavin Andersen。在BitcoinCore小组成立之前，Gavin是唯一一位比特币全职开发人员。因此2014年他不再担任首席开发者时让人唏嘘不已。紧接着在2016年Core开发组剥夺了他的开发权限，声称此举是因为担心他的Github遭到攻击。事实却并非如此。Gavin曾计划增大区块，但是Core开发者却强烈反对这一做法。结果，有传言Core不断施压，强迫Gavin退出小组内部讨论。

GavinAnderson并不是唯一一位与Core开发组意见不合的人。MikeHearn作为颇有声望的比特币开发者，也支持扩大区块。2016年Mike离开了开发小组，表示扩容问题迟迟得不到解决是因为Core小组拒绝执行必要的改变来增大区块。随后，另一位开发者Jeff Garzik在2017年4月被踢出开发者名单，原因是因为他支持segwit2x扩容方案。中本聪委托的那些开发者离开之后，Core就完全控制了比特币。如今，Core通过表决比特币改进方案（BIP）操控共识规则的改变。当然，如果能够获得POW矿工的支持，规则改变只是在比特币网络上生效。

事实上，Core只是众多开发小组之一，其他出名的开发小组还有BU和BitcoinABC。Core是一切开发工作的参考客户端，也就是说其他小组的替代应用必须要在Core小组的基础上进行。比如，Core用C++写代码，但也有其他比特币应用。包括基于Golang的btcd，也就是现在Decred发开小组创造的。虽然有各种开发小组，比特币相关的开发决策都要由Core点头同意。

比特币的治理和政治问题可以总结为：**比特币的治理结构实质是出自对比特币核心开发者和技术人员的信任，他们的专业程度能做出最正确的决定，能够运行新的技术特征。**

这种以技术为支撑的治理模式存在很多问题，因为这与比特币最初的理念相违背。这就导致这样一种悖论：比特币作为一种去中心化的技术基础不能由第三方进行管控，而实际决定权掌握在技术者手中，尽管社区仍是开源的却难以避免导致中心化和不民主的问题。开发者要进行哪些技术升级不涉及政治问题，因此也不会进行公开讨论。

你或许想知道Core开发者是怎样获得决定权的？部分原因在与他们的技术实力过硬，都是经验丰富的软件工程师。然而，任何事情都有两面性。另一部分原因是由于缺乏了解，社区理所应当的认为他们掌握这种权利。这也就是所谓的“知道的魔鬼要比不知道的魔鬼好。”

最近闪电网络的知名开发者JosephPoon表示他发现Core有一个秘密渠道专门进行公关和恶意中伤他人的行为，他对此非常失望。之前就有人怀疑Core进行有组织的诋毁工作，因为有人在Reddit上发现Core的赞助公司Blockstream雇佣了一个知名的五毛党。然而，这并不是第一次外部机构参与比特币的内部事宜。

这再次证明如果没有正式有效的治理方式来决定谁能允许硬分叉，就不会代表社区的真实意见，让少数具有发言权的人来伪造更多的账户来迷惑社区。

让我们再回顾一下中本聪的白皮书，他已经明确指出正因为这个原因不能执行1IP代表1投票权，因为任何人都可以创造多个IP。也就是说，如果持有大部分节点的人都能表决硬分叉，那只要运行多个节点就可以造假投票结果。

Core小组一直声称保持1M的区块大小是为了保证社区可以运行全节点，但这种解释受到了质疑。上文我们提到Core是Blockstream资助的，他们的扩容方案是开发一条侧链，在侧链上进行交易，在原链上确认交易。Blockstream打算把侧链卖给商家，按月收取固定费用。不难想象，这种开发路线受到社区很多人的强烈反对，他们质疑Core坚持不扩容就是为了让Blockstream利益最大化。这也是为什么Decred团队坚持开发要自给自足，确保去中心化。10%的挖矿费用用来支持开发基金。

我一直坚信用户应该参与决策，所以同意Core认为社区进行表决是否要进行硬分叉。但事实却是我们无法改变比特币网络的利润模式。

### 我不赞同让POW矿工进行决策，那我该做些什么呢？ 

如果你不支持矿工进行决策，也没有关系，任何人有都有选择权。但是只要你决定挖矿，就无法改变矿工掌握实权的事实。中本聪设计的比特币就是让矿工掌握实权饿。如果你不认同个这种观点，那么你就是相信比特币的治理是存在缺陷的。如果比特币网络分裂，你有以下三种选择：
* 继续支持中本聪版本的比特币，也就是最多POW认可的链，被POW矿工统治。
* 转而支持比特现金，选择小链，而不是多数人支持的长链。
* 如果你受够了比特币社区的混战，可以支持一种特意为解决这一问题而诞生的新币种。你可以选择Decred，用户可以在其去中心化的用户激活硬分叉的链上进行投票。

### 谁决定Decred的共识改变，怎么进行改变？

C0在初期就意识到比特币社区矿工享有太多发言权。他们知道解决这一问题的唯一途径就是开发一种新币，建立一种治理体系把决定权掌握在那些与用户利益一致的参与者手中。一个具有链上投票机制，进行去中心化投票的币种。

建立在Memcoin2和Proof-of-Activity理论基础之上，C0决定采取POW和POS的混合机制来平衡比特币的决策共识。新系统的激励政策如下：POW矿工获得60%的区块奖励，POS矿工享受30%的区块奖励，开发基金会享受10%的区块奖励以避免外部资金影响社区决策。

与比特币的BIP机制相似，Decred社区任何人都可以提交Decred更改方案（DCP）来阐明可行的共识改变。然而，与比特币POW矿工掌握最终表决权不同，DCP的提议是转交给基金会利益各方，他们通过链上POS投票机制来决定通过与否。

### 基金会利益相关者（基金会股东）如何做决定？

**要通过DCP来更改Decred的共识机制就必须要获得投票权。**Decredition里有70个币可以进行投票，但是价格会根据需求有所调整。如果投票权需求大，价格就会提高；如果需求减少，价格就会降低。获得投票权之后，你只需要在Decredition里进行表决即可，如下图所示。你的DCR会被锁定在POS上，等个大约28天，这个投票被随机选中后就会解锁。但是也有可能要等个142天你的这张票才会被选中，有0.5%的机率这张票会过期也没被选中。不管这张票被抽到还是过期，你的DCR都会打回到自己的钱包，还会获得参与决策制定的POS奖励。目前奖励数为1.4个DCR，除去矿池的手续费。75%以上的股东支持这张投票，这次DCP就会获得认可。更多投票细节请点击：

https://docs.decred.org/getting-started/user-guides/agenda-voting/ 

### Decred是如何避免决策制定中心化的？

Decred决策过程从一开始就是去中心化的。为了保证社会广大成员能够获得最初的投票权，84万的DCR空投给了3244个社区成员。此外，POW+POS机制让pow下的矿工获得的收益是pos矿工的两倍。这样一来，基金会利益相关方不可能在早期低价大量买入来获得更多投票权。此外，为了避免开发者们获得决定权，他们最初都没有获得空投份额，而是需要自己购买DCR，投票表明自己的立场（这在区块链上可以查询）。更重要的是，由于所有用来进行投票的DCR都被锁定了，这也就避免了有人在市场上购买币来获得表决权。

### Decred的治理体系如何确保基金会股东作出正确的决策？

股东有动机作出正确的决策是因为他们自己都是利益相关方。前文提到了，投票需要把币锁住。所以股东自然会希望做出的决定能都最大化DCR的价值，而且锁定的份额越高，利益攸关越大，投票权也随之越大。所以不会有人恶意作出不好的决策来损害自己的利益。

相反地，比特币的POW矿工不需要持有比特币就可以决定更改共识机制。除了投资进行挖矿的成本（矿机可以卖掉或者用来挖别的币种），矿工们并没有别的动机防止他们作出错误决定。事实上，矿工完全可以在不影响利益的前提下作决定。比如，他们可以故意停止支持硬分叉，让硬分叉的支持率不达标。而这当然会不利于比特币的价格，所以矿工会操控比特币价格，低价买入，然后转而支持硬分叉来拉高比特币价格。

当然这并不是Decred保证决定正确的唯一方式。因为股东们集体做决定时形成了一个“决策智囊团”。

证据表明集体要比某某专家个人能作出更好的决定。大家在一起，贡献各自的知识，表达各自的观点和意识形态，从而制定对集体最有利的决策。

虽然有种观点认为集体做决策会形成一种“乌合之众”的现象，但这种情况在Decred的治理体系中是不存在的。有人认为个人在集体做决定时很可能会失去自我，盲目从众来避免承担责任，等待一个有号召力的领导重新制定决策。然后在Decred的股东做决定时，表明自己的态度，从自身的利益出发，自然不会成为“乌合之众”。

在制定决策的过程中，世界各地的成千上万的Decred股东们都会建言献策，这就好像一场世界范围内的“头脑风暴”。

### 如果Decred社区发生了比特现金或Segwit2x的情形呢？

首先，Decred不会发生比特币那样的分叉问题。我们有一个链上投票机制来表决硬分叉相关的问题。其次，Decred分叉绝不会像比特现金或Segwit2x那样。这是因为POW矿工产生的新区块需要与Decred股东（POS矿工）的意愿相吻合。如果前者拒绝遵从集体政策，那么POS股东可以让新区块无效。比如，80%的股东支持激活闪电网络，而20%的股东拒绝，那么这80%的股东就可以直接投票让旧链上的新区块无效。这样一来，POW矿工就会直接从旧链转移到激活了闪电网络的新链上，旧链也就死掉了。

唯一能够违背股东意愿进行硬分叉的方法是从头开始，创造一个新的分叉链。但这样分叉链就跟Decred完全无关了，也就不会有任何关注度。

### 总结

Decred这种创新的链上共识投票机制能够确保硬分叉安全进行。这套系统能够确保在不损害去中心化的前提下及时作出决定。Decred在3个月内就完成投票，激活了闪电网络，制定了一套新的共识机制。相比之下，比特币的扩容之争已经持续3年了。

我认为Decred的治理机制正是加密货币社区苦苦寻找的良方。我们终于能有一种真正去中心化的币种，不需要生来就具备某种特征或使用案例。一个币种能够建立在去中心化的治理基础上就具备了最好的使用案例，即不断演化的能力。这能够让Decred具备多种使用场景，而比特币的使用场景则特别单一。

C0和Decred的开发者们已经实现了他们的初衷，有效解决了比特币的治理危机并且对比特币的技术进行了升级。因此我认为Decred会演变成加密货币的终极形式，具备多种特征和使用案例。闪电网络，更好的隐密性和去中心化的自治组织都会一一实现。Decred会成为最好的加密币种。

治理是一个难题，但我们的开发者们却做到了。比特币及整个社区将见证Decred在去中心化的治理机制上创造新的辉煌。Decred的时代来了！



翻译：cindy </br>
原文：https://thedecreddigest.com/2017/11/08/hard-forks-done-right-its-decreds-time-to-shine/